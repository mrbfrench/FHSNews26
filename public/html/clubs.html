<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="HandheldFriendly" content="true">
  <meta name="description" content="A list of clubs for Fishers High School.">

  <title>Clubs</title>
  <link rel="shortcut icon" type="image/ico" href="../img/favicon.ico">

    	<!-- Inline script to set the theme immediately -->
	<script>
	(function() {
	  var savedTheme = localStorage.getItem('selectedTheme') || 'default';
	  document.write('<link rel="stylesheet" href="../themes/' + savedTheme + '.css" id="theme-style">');
	})();
	</script>
	<script src="js/TFClubs.js" defer></script>
  <!-- CSS files go here -->
  <link rel="stylesheet" href="../css/global.css">
  <link rel="stylesheet" href="../css/club.css">

  <!-- Current theme goes here -->
  <link rel="stylesheet" href="" id="theme-style"> <!-- default theme -->
</head>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XZ50F79FHM"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-XZ50F79FHM');
</script>

<body>
  <header>
    <div class="clubs-title">Clubs</div>
    <a href="/info">
      <div>
        <img src="../img/questionmark_white.png" alt="?" width="40" height="40">
      </div>
    </a>
  </header>
<!--<section class="row row-club">
    <div id="modal-container"></div>
    <nav>
		<div id="nav-tabs">
			<a id="nav-tabs__home" href="/">
				<div>
					<img class="svg-convert" src="../img/gradcap.svg" alt="Home" width="34" height="34">
					<span>Home</span>
				</div>
			</a>
			<a id="nav-tabs__clubs" href="/clubs" class="selected">
				<div>
					<img class="svg-convert" src="../img/clubs.svg" alt="Clubs" width="34" height="34">
					<span>Clubs</span>
				</div>
			</a>
			<a id="nav-tabs__cal" href="/calendar">
				<div>
					<img class="svg-convert" src="../img/calendar.svg" alt="Calendar" width="34" height="34">
					<span>Calendar</span>
				</div>
			</a>
		</div>
	</nav>
  </section>
-->
  <script>
	// Function to toggle filter overlay
	function filterOverlay() {	
    const overlay = document.getElementById('filterOverlay');
    overlay.classList.toggle('show');

    const main = document.querySelector(".blur");
    main.classList.toggle('blurred');
	
	}
  </script>
  <img src="\img\filter-icon.webp" id="filterIcon" onclick="filterOverlay()" alt="Filter Icon">
  <div id="filterOverlay">
            <div class="filter-grid">
                <div class="filter-catagory">
                    <h3>Club Type</h3>
                    <label><input type="checkbox" class="filterBox" id="checkboxAcademic"
                            onclick="saveCheckboxStates()">Academic</label>
                    <label><input type="checkbox" class="filterBox" id="checkboxService"
                            onclick="saveCheckboxStates()">Service</label>
                    <label><input type="checkbox" class="filterBox" id="checkboxSports"
                            onclick="saveCheckboxStates()">Sports</label>
                    <label><input type="checkbox" class="filterBox" id="checkboxArt"
                            onclick="saveCheckboxStates()">Art</label>
                    <label><input type="checkbox" class="filterBox" id="checkboxGames"
                            onclick="saveCheckboxStates()">Games</label>
                </div>
                <div class="filter-catagory">
                    <h3>Meeting Time</h3>
                    <label><input type="checkbox" class="filterBox" id="checkboxBefore"
                            onclick="saveCheckboxStates()">Before School</label>
                    <label><input type="checkbox" class="filterBox" id="checkboxAfter"
                            onclick="saveCheckboxStates()">After School</label>
                </div>
                <div class="filter-catagory">
                    <h3>Meeting Days</h3>
                    <label><input type="checkbox" class="filterBox" id="checkboxMonday" onclick="saveCheckboxStates()">
                        Monday</label>
                    <label><input type="checkbox" class="filterBox" id="checkboxTuesday" onclick="saveCheckboxStates()">
                        Tuesday</label>
                    <label><input type="checkbox" class="filterBox" id="checkboxWednesday"
                            onclick="saveCheckboxStates()"> Wednesday</label>
                    <label><input type="checkbox" class="filterBox" id="checkboxThursday"
                            onclick="saveCheckboxStates()"> Thursday</label>
                    <label><input type="checkbox" class="filterBox" id="checkboxFriday" onclick="saveCheckboxStates()">
                        Friday</label>
                    <label><input type="checkbox" class="filterBox" id="checkboxWeekend" onclick="saveCheckboxStates()">
                        Weekend</label>
                </div>
            </div>
        </div>
  <section>
	<div class="blur">
        

        <a href="https://docs.google.com/forms/d/e/1FAIpQLSfONSdvX3OYml32AFaBjTFnT3xYBy98PFyc02U0ttxBHCQocQ/viewform"
            target="_blank" class="clubForm button">
            <button id="clubForm button">If your club is not present or does not have details fill out this
                form</button>
        </a>

        <br>
        <ul id="clubList" class="container"></ul>
        <script>
            createClubs();
        </script>
        <!--Search Bar Functionality -->
        <script>
            window.addEventListener("DOMContentLoaded", () => {
                const searchBar = document.getElementById("searchBar");
                const clubList = document.getElementById("clubList");

                function filterClubs(term) {
                    const searchTerm = term.toLowerCase();
                    const clubItems = clubList.querySelectorAll("li");

                    clubItems.forEach(item => {
                        const clubName = item.querySelector("h3")?.textContent.toLowerCase() || "";
                        const staffName = item.querySelector("p")?.textContent.toLowerCase() || "";

                        if (clubName.includes(searchTerm) || staffName.includes(searchTerm)) {
                            item.style.display = "flex";
                        } else {
                            item.style.display = "none";
                        }
                    });
                }

                // Load saved search term and immediately filter
                const savedSearch = localStorage.getItem("searchTerm") || "";
                searchBar.value = savedSearch;
                filterClubs(savedSearch);

                // Save and re-filter when typing
                searchBar.addEventListener("input", (e) => {
                    const term = e.target.value;
                    localStorage.setItem("searchTerm", term);
                    filterClubs(term);
                });
            });
        </script>
    </div>
    <!-- Overlay for club description -->
    <div id="descriptionOverlay" class="overlay hidden">
        <div class="overlay-content">
            <span id="closeOverlay" class="close-btn">&times;</span>
            <h2 id="overlayTitle"></h2>
            <p id="overlayStaff"></p>
            <p id="overlayEmail"></p>
            <p id="overlayTime"></p>
            <p id="overlayType"></p>
            <p id="overlayDays"></p>
            <div id="overlayDescription"></div>
        </div>
    </div>
  </section>
  <script src="../js/DOM.js" charset="utf-8"></script>
  <script src="../js/clubs.js" charset="utf-8"></script>
</body>

<script type="text/javascript">
    window.addEventListener('load', function() {
	  // Get all img tags with svg-to-inline class
	  var imgTags = document.querySelectorAll('.svg-convert');

	  // Loop through each tag found
	  imgTags.forEach(function(img) {
		var imgURL = img.src;

		// Fetch the SVG
		fetch(imgURL)
		  .then(response => response.text())
		  .then(data => {
			// Parse fetched SVG and replace img tag with it
			var parser = new DOMParser();
			var doc = parser.parseFromString(data, 'image/svg+xml');
			img.parentNode.replaceChild(doc.documentElement, img);
		  })
		  .catch(error => {
			console.error("Error fetching the SVG: ", error);
		  });
	  });
	});

    	// Function to switch the theme and save the choice in localStorage
	function switchTheme(themeName) {
	  const themeLink = document.getElementById('theme-style');
	  themeLink.href = `../themes/${themeName}.css`;
	}

    window.addEventListener('DOMContentLoaded', function () {
    // Apply the saved theme when the page loads
	  const savedTheme = localStorage.getItem('selectedTheme');
	  if (savedTheme) {
          switchTheme(savedTheme);

      }
    });
</script>

</html>
